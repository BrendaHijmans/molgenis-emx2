/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
    id 'com.palantir.git-version' version '0.12.2'
}

dependencies {
    compile project(':molgenis-emx2-sql')
    implementation 'org.jooq:jooq:3.11.12'
    implementation project(':molgenis-emx2-io')
    implementation project(':molgenis-emx2')
    implementation 'com.sparkjava:spark-core:2.8.0'
    implementation 'io.swagger.parser.v3:swagger-parser:2.0.14'
    implementation 'com.graphql-java:graphql-java:13.0'
    implementation 'com.jsoniter:jsoniter:0.9.19'
    implementation 'com.zaxxer:HikariCP:2.7.8'
    implementation project(':molgenis-emx2-exampledata')
    implementation 'com.squareup.okhttp3:okhttp:4.2.2'
    implementation 'com.squareup.okhttp3:okhttp-brotli:4.2.2'
    testImplementation 'io.rest-assured:rest-assured:4.1.1'
}

task writeVersion {
    dependsOn classes
    def details = versionDetails()
    def version = "emx2.version=" + project.version.toString() + "; git hash: " + details.gitHash + "; timestamp: " + new Date().format("yyyy-MM-dd'T'HH:mm:ss")
    mkdir "${project.buildDir}/resources/main/"
    def file = new File("${project.buildDir}/resources/main/version.properties")
    file.write(version)
}
